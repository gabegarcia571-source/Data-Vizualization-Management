---
title: "Tidy Tuesday"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(knitr)
```

**Data Summary**

I started by loading jsonlite and tidyverse and reading in the two main files:

rank_by_year.csv – the core data I use for almost everything
country_lists.csv – the JSON columns that break destinations into visa-free, visa-on-arrival, etc.

I used glimpse() and summary() to make sure I understood the structure. One row per country–year with variables for country, region, visa_free_count, rank, and year. After looking at both datasets, I decided the JSON list columns weren’t necessary for the story I wanted to tell, so I focused my analysis on the first csv. The key decision here was: keep the pipeline simple and stick to the variables that directly connect to passport strength (visa-free count + year + country).

Data:
- Country and Region: Geographic identification
- Visa-Free Count: Number of destinations travelers can visit without obtaining a pre-visa
- Global Ranking: The country's position relative to other passports

Over the last two decades diplomatic relationships, economic development, and geopolitical shifts have transformed global mobility. My project focuses on (1) how regional powerhouse passports have evolved over time, and (2) which historically weak passports have achieved the largest gains in visa-free access. I felt these two angles balanced the story: not just who is dominating, but who is catching up-which tells us more about the world changing.

**Visualization 1: Regional Powerhouse Trends**

```{r, echo=FALSE, fig.align='center', out.width="80%"}
knitr::include_graphics("powerhouse_trends.png")
```

Early attempt: automatic top-7 passports

My first try at the time-series plot was to let the data pick the top passports. Then I filtered rank down to those countries and plotted visa-free counts over time with geom_line().
This worked technically, but it had two problems because The US didn’t appear(it was in a tie outside the top 7) and the selection didn’t guarantee good regional coverage; I wanted a global story, not just who's #1
That led to the next decision where I hand-picked regional powerhouses. Instead of relying on the ranking, I created a selected_countries vector:

Singapore (Asia, new powerhouse)
Japan (Asia, traditional powerhouse)
Germany (Europe)
United States (North America)
UAE (Middle East rising star)
Brazil (South America)

This is a deliberate tradeoff: I’m giving up “purely top-7” for a clear regional story that viewers actually recognize.
When I plotted the time series straight from rank_by_year, a couple of years had odd dips-likely due to 0s or missing values in visa_free_count. That looked like fake political events.
To avoid telling a wrong story, I filtered out rows where visa_free_count <= 0 or NA:
I used that cleaned data both in the static ggplot and in the Shiny app so everything stays consistent.
That choice made the lines smooth and believable-if a sudden drop doesn’t reflect diplomacy changing, it shouldn’t appear in the chart.

**Visualization 2: Global Power Shifts (2006-2025)**

```{r}
knitr::include_graphics("power_shift.png")
```

I wanted a broader view of how passport power changed for all countries. I used a full ranking from “lost the most access” to “gained the most.” Then I did something that really makes the chart work:

I grabbed the bottom 10 and top 10 countries and stacked them into one data frame so the viewer immediately sees who gained the most and also sees who either barely improved or actually lost ground (Bolivia). I wanted the colors to mean something. So I created a change_type column with case_when. Then I converted that to a factor and used scale_fill_manual() to lock in consistent colors:

- Red for decline
- Gold for small improvement
- Green for major improvement

This is what lets the viewer understand the chart at a glance without reading every number.

For the final plot I ordered the bars from best to worst change. I went horizontal to keep the country names readable. I added custom labels (+99, -5, etc.) and nudged them left/right depending on whether the change was positive or negative. I wrote the subtitle to explicitly call out the Bolivia finding. Those coding decisions turn a giant table of numbers into a clean narrative about inequality in global mobility. The horizontal layout and sorting make the “winners vs losers” structure instantly clear-even someone just glancing understands the takeaway.

**Interactive Exploration**

I wanted an interactive way to let people play with the data, so I built a Shiny app around the same cleaned datasets.

Checkbox filter: I added a checkboxGroupInput for selected_countries, then wrapped the filtering in a reactive that lets users decide which powerhouse lines they want to see.

Leaderboard slider: I pulled the unique years, dropped the weird ones (2007, 2009), and fed them to a sliderTextInput so the leaderboard only uses valid years.

I used seperate tabs to show:

- “Trends” as a time-series line
- “Powerhouse Leaderboard” a hidden year-specific table
- “Biggest Improvers” → the underdog bar chart

I also experimented with expressions in the leaderboard to track how "rank" changes over time and encode it visually (↑, ↓, —) so the table feels dynamic, not static.

In its entirety, the shiny app accessibility contains:

- Animated year-by-year leaderboard comparisons with rank change indicators
- Hover tooltips showing key diplomatic events and milestones
- Dynamic country filtering to explore specific regional patterns

The static plots show the highlights, and the app lets the viewer dig into the details if they want to.

(Note: To add context to the time series, I created a key_events tibble by hand where each row has a country, a year, a short event description, and a longer detail. In plotly, I used those columns to build hover text that combines the visa-free count and a short story on a countries improvement. This wasn’t required for the assignment, but it makes the Shiny version feel more like an explorable story and less like just lines on a chart.)

**Visit the Shiny app:**
*https://ggarcia-stats.shinyapps.io/Shiny_Tidy_UI_Experiment/*


**Big Takeaways on "Why my visualizations are effective"**

I almost always reduce the data to one row per country (with start, end, and change) before plotting. That makes charts interpretable. I filtered out weird zero/NA years so the plots reflect actual change, not noise. I reordered countries by change and using meaningful color categories is what turns raw stats into a story. I reshape the data to match the story, and I design the visuals to make that story jump out immediately.

Everything is intentional-the choices in structure, filtering, ordering, and color are what turn data into a narrative instead of a spreadsheet.

Code Appendix

Full code documentation including all data processing steps, iterative debugging, and visualization development is available in the attached file on gradescope.

Data Source: TidyTuesday (2025). Henley Passport Index.
https://github.com/rfordatascience/tidytuesday/tree/main/data/2025


---